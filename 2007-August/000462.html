<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [gpodder-devel] Wrong length again
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/gpodder-devel/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:gpodder-devel%40lists.berlios.de?Subject=Re%3A%20%5Bgpodder-devel%5D%20Wrong%20length%20again&In-Reply-To=%3C200708081949.09824.nikosapi%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000456.html">
   <LINK REL="Next"  HREF="000464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[gpodder-devel] Wrong length again</H1>
    <B>nikosapi</B> 
    <A HREF="mailto:gpodder-devel%40lists.berlios.de?Subject=Re%3A%20%5Bgpodder-devel%5D%20Wrong%20length%20again&In-Reply-To=%3C200708081949.09824.nikosapi%40gmail.com%3E"
       TITLE="[gpodder-devel] Wrong length again">nikosapi at gmail.com
       </A><BR>
    <I>Thu Aug  9 01:49:09 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000456.html">[gpodder-devel] Wrong length again
</A></li>
        <LI>Next message: <A HREF="000464.html">[gpodder-devel] Wrong length again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#462">[ date ]</a>
              <a href="thread.html#462">[ thread ]</a>
              <a href="subject.html#462">[ subject ]</a>
              <a href="author.html#462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Thomas,

On August 7, 2007 14:27:32 Thomas Perl wrote:
&gt;<i> Hello, Nick and G&#246;tz!
</I>&gt;<i>
</I>&gt;<i> On Mon, 2007-08-06 at 22:59 -0400, nikosapi wrote:
</I>&gt;<i> &gt; On August 6, 2007 15:01:17 Thomas Perl wrote:
</I>&gt;<i> &gt; &gt; On Mon, 2007-08-06 at 20:30 +0200, G&#246;tz Waschk wrote:
</I>&gt;<i> &gt; &gt; detection have previously been because of enhanced AAC files. Does
</I>&gt;<i> &gt; &gt; libmad always provide the correct length for MP3 files? If so, maybe
</I>&gt;<i> &gt; &gt; using libmad for MP3 files and mplayer for everything else would fix
</I>&gt;<i> &gt; &gt; your problem?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Ok, here's the promissed patch :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If mplayer is available, it will use it for all media files. If the file
</I>&gt;<i> &gt; is an mp3 and pymad is installed it will get the length reported by pymad
</I>&gt;<i> &gt; and compare it to the length from mplayer and use the longer of the two
</I>&gt;<i> &gt; (this works great btw). And of course, worst case eyed3 is still
</I>&gt;<i> &gt; available if all else fails.
</I>&gt;<i>
</I>&gt;<i> I've revisited your patch for the latest SVN trunk head (I've done some
</I>&gt;<i> restructuring of the code during the weekend, because I want to clean up
</I>&gt;<i> the codebase a bit to get ready for the &quot;gPodder API&quot; ;).
</I>
That's pretty neat ;)

&gt;<i> Maybe we should try out all possible ways to detect the file length
</I>&gt;<i> (including eyed3) and use the maximum reported time? Or just leave it as it
</I>&gt;<i> is currently (default to mplayer, if pymad is here, try and use it if
</I>&gt;<i> length is bigger, and if none of the above is available/working, try
</I>&gt;<i> eyed3). What do you think?
</I>
I'd like to propose that you ignore that patch because of a few reasons...

1) I've been using the mplayer/pymad combo for 2 days now and it seems pymad 
isn't all that great at detecting file lengths. On two occasions it has 
reported that files are infact much longer than they really are (by hours).

2) Mplayer, IMO is the best media player out there and if it can't find the 
proper file length there isn't much else that will, so there's no point 
double checking each mp3 with both mplayer and pymad.

3) A far simpler solution would be to just add 5 to 10 seconds extra to the 
file length just to be sure we're not cutting the file short. It doesn't hurt 
the player (it stops at EOF) and on a normal podcast it wouldn't even be 
noticeable that the slider is a bit longer (if it were a song, it would be a 
different story).

&gt;<i> &gt; Oh and btw, about Cory Doctorow's podcasts. The mp3s are borked, all the
</I>&gt;<i> &gt; media players I tried them with gave different play times. Pymad gets
</I>&gt;<i> &gt; close to the right time but is off by ~10sec. Email Cory and tell him to
</I>&gt;<i> &gt; use a better mp3 encoder (he still reads all his emails right?).
</I>&gt;<i>
</I>&gt;<i> I think we're way too cool to support even broken podcasts, hehe :) I'm
</I>&gt;<i> glad we have motivated contributors and bug reporters that help us make
</I>&gt;<i> gPodder so great in this respect (file length detection is quite
</I>&gt;<i> sophisticated already, and as we saw, &quot;valid&quot; MP3 files are not always
</I>&gt;<i> the reality in the cruel, dark podcast world :).
</I>
I fully agree, the podcaster should get his act together. I tested the file 
with the mp3val tool and it did find errors, here's a bit of the output:

WARNING: (offset 0x6dbda): MPEG stream error, resynchronized successfully
WARNING: Wrong number of MPEG data bytes specified in Xing header (17958326 
instead of 17958144)

That said, I have been listening to that podcast and I must say, the book he's 
reading is very good :) 

&gt;<i>
</I>&gt;<i> Thomas
</I>
nick

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000456.html">[gpodder-devel] Wrong length again
</A></li>
	<LI>Next message: <A HREF="000464.html">[gpodder-devel] Wrong length again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#462">[ date ]</a>
              <a href="thread.html#462">[ thread ]</a>
              <a href="subject.html#462">[ subject ]</a>
              <a href="author.html#462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/gpodder-devel">More information about the gpodder-devel
mailing list</a><br>
</body></html>
